<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Simulador de Entrevista ‚Äì TechNova Solutions</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
:root{
  --brand-blue:#0b5394;--brand-green:#22b14c;
  --bg-light:#f0f4f8;--bg-dark:#111827;
  --card-light:#fff;--card-dark:#1f2937;
  --ink-light:#111827;--ink-dark:#f9fafb;
  --shadow:0 8px 24px rgba(0,0,0,.15);
  --radius:16px;--transition:.3s ease;
}
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:Inter,sans-serif;background:var(--bg-light);color:var(--ink-light);transition:background var(--transition),color var(--transition);}
body.dark{background:var(--bg-dark);color:var(--ink-dark);}
header{position:sticky;top:0;background:linear-gradient(135deg,var(--brand-blue),var(--brand-green));color:white;display:flex;justify-content:space-between;align-items:center;padding:12px 24px;border-bottom:3px solid var(--brand-green);flex-wrap:wrap;z-index:100;}
header h1{margin:0;font-size:clamp(18px,4vw,26px);}
header img{height:36px;}
.controls{display:flex;gap:10px;flex-wrap:wrap;margin-top:8px;}
.btn{border:none;padding:10px 16px;border-radius:12px;cursor:pointer;background:#f9fafb;color:#111;font-weight:600;transition:transform var(--transition),background var(--transition),box-shadow var(--transition);}
body.dark .btn{background:#374151;color:white;}
.btn:hover{transform:translateY(-2px);box-shadow:0 6px 18px rgba(0,0,0,.2);background:#e0f2fe;}
body.dark .btn:hover{background:#4b5563;}
.btn.primary{background:linear-gradient(135deg,var(--brand-blue),var(--brand-green));color:white;}
main.wrap{max-width:1000px;margin:20px auto 40px;padding:20px;}
#menu{text-align:center;display:flex;flex-direction:column;align-items:center;gap:16px;padding:40px;}
#menu ul{text-align:left;max-width:600px;margin:0 auto 20px;}
#game{display:flex;flex-direction:column;align-items:center;gap:20px;}
.card{width:90%;max-width:700px;background:var(--card-light);padding:20px;border-radius:var(--radius);box-shadow:var(--shadow);position:relative;transition:transform var(--transition);display:flex;flex-direction:column;gap:12px;}
body.dark .card{background:var(--card-dark);color:var(--ink-dark);}
textarea{width:100%;height:120px;padding:10px;border-radius:12px;border:1px solid #ccc;font-size:1rem;resize:none;}
textarea:focus{outline:none;border-color:var(--brand-blue);}
#audioPreview{margin-top:10px;}
#progressBarContainer{width:100%;background:#ddd;border-radius:10px;overflow:hidden;margin:20px 0;}
#progressBar{height:20px;background:linear-gradient(90deg,var(--brand-blue),var(--brand-green));width:0%;transition:width .5s ease;}
#phaseInfo{text-align:center;font-weight:700;margin-bottom:10px;}
#timer{text-align:center;font-weight:700;margin:10px 0;font-size:1.1rem;}
table{border-collapse:collapse;width:100%;max-width:900px;margin:20px auto;font-size:0.95rem;border-radius:12px;overflow:hidden;}
th,td{border:1px solid #ccc;padding:10px;text-align:left;}
th{background:linear-gradient(135deg,var(--brand-blue),var(--brand-green));color:white;font-weight:600;}
.correct{background:#d4edda;}
.incorrect{background:#f8d7da;}
.result-box{max-width:900px;margin:20px auto;padding:20px;background:#fff;border-radius:16px;box-shadow:var(--shadow);}
body.dark .result-box{background:#1f2937;color:var(--ink-dark);}
.result-header{text-align:center;margin-bottom:20px;}
.result-header h2{font-size:1.8rem;color:var(--brand-blue);}
.result-summary{display:flex;justify-content:space-around;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:20px;}
.result-card{background:linear-gradient(135deg,var(--brand-blue),var(--brand-green));color:white;padding:20px;border-radius:16px;flex:1 1 200px;text-align:center;box-shadow:var(--shadow);}
.medal{font-size:2rem;text-align:center;margin-top:20px;animation:jump 1s infinite alternate;}
@keyframes jump{0%{transform:translateY(0);}100%{transform:translateY(-10px);}}
.confetti{position:fixed;top:0;left:50%;width:10px;height:10px;background:var(--brand-green);opacity:0.7;animation:fall 3s linear forwards;z-index:9999;}
@keyframes fall{0%{transform:translateY(-10px) rotate(0deg);}100%{transform:translateY(100vh) rotate(720deg);opacity:0;}}
footer{text-align:center;padding:16px 0;color:#555;font-size:0.9rem;border-top:1px solid #ccc;display:flex;flex-direction:column;align-items:center;gap:8px;}
footer img{height:25px;}
body.dark footer{color:#aaa;border-color:#444;}
</style>
</head>
<body>
<header>
  <h1><img src="https://opiniaobrasilia.com.br/wp-content/uploads/2020/12/RenovaDF.jpeg" alt="Logo Renova DF"> Simulador de Entrevista</h1>
  <div class="controls">
    <button class="btn" id="toggleDark">üåô</button>
    <button class="btn" onclick="backToMenu()">üè† In√≠cio</button>
  </div>
</header>

<main class="wrap">
  <div id="menu">
    <h2>üéØ Bem-vindo ao Simulador de Entrevista ‚Äì TechNova Solutions</h2>
    <p>Voc√™ participar√° de uma entrevista para a vaga de <strong>Analista de Projetos</strong> com sal√°rio de <strong>R$4.500,00</strong>.</p>
    <p>üí° Como usar:</p>
    <ul>
      <li>Clique em <strong>Ouvir Pergunta üîä</strong> para escutar a quest√£o.</li>
      <li>Digite sua resposta ou grave com <strong>üé§ Gravar Resposta</strong>.</li>
      <li>Clique em <strong>‚úÖ Enviar Resposta</strong> para avan√ßar.</li>
      <li>Respostas anteriores desaparecem quando novas perguntas aparecem.</li>
      <li>Ao final, receber√° resumo, pontua√ß√£o, medalha e chances de conseguir a vaga.</li>
    </ul>
    <button class="btn primary" onclick="speakInstructions()">üîä Ouvir Instru√ß√µes</button>
    <button class="btn primary" onclick="startSimulation()">‚ñ∂Ô∏è Iniciar Simula√ß√£o</button>
  </div>

  <div id="phaseInfo" style="display:none;"></div>
  <div id="timer" style="display:none;">‚è±Ô∏è 00:00</div>
  <div id="progressBarContainer" style="display:none;">
    <div id="progressBar"></div>
  </div>

  <div id="game"></div>
</main>

<footer>
  <img src="https://opiniaobrasilia.com.br/wp-content/uploads/2020/12/RenovaDF.jpeg" alt="Logo Renova DF">
  <span>Criado por Marcelo Emanoel</span>
</footer>

<script>
const soundWin = new Audio("https://actions.google.com/sounds/v1/ambiences/wind_chime.ogg");
let currentQuestion=0, seconds=0, timerInterval;
let answers=[];

// 15 perguntas em uma √∫nica fase
const QUESTIONS=[
  {q:"Como voc√™ lida com conflitos no trabalho?",keywords:["conflito","negocia√ß√£o","resolu√ß√£o"]},
  {q:"Como prioriza tarefas?",keywords:["prioriza√ß√£o","organiza√ß√£o","foco"]},
  {q:"Como se comunica com colegas?",keywords:["comunica√ß√£o","clareza","respeito"]},
  {q:"Como demonstra proatividade?",keywords:["proatividade","iniciativa","responsabilidade"]},
  {q:"Como lida com press√£o?",keywords:["press√£o","controle","resili√™ncia"]},
  {q:"Como aprende coisas novas rapidamente?",keywords:["aprendizado","curiosidade","efici√™ncia"]},
  {q:"Como trabalha em equipe?",keywords:["colabora√ß√£o","coopera√ß√£o","respeito"]},
  {q:"Como organiza seu tempo?",keywords:["organiza√ß√£o","tempo","planejamento"]},
  {q:"Como resolve problemas?",keywords:["resolu√ß√£o","an√°lise","criatividade"]},
  {q:"Como recebe feedback?",keywords:["feedback","melhoria","aberto"]},
  {q:"Como busca resultados?",keywords:["resultado","efici√™ncia","meta"]},
  {q:"Como lida com erros?",keywords:["erro","aprendizado","resili√™ncia"]},
  {q:"Como lidera projetos?",keywords:["lideran√ßa","coordena√ß√£o","gest√£o"]},
  {q:"Como se adapta a mudan√ßas?",keywords:["adapta√ß√£o","flexibilidade","resili√™ncia"]},
  {q:"Como comunica ideias complexas?",keywords:["comunica√ß√£o","clareza","impacto"]}
];

function speakInstructions(){
  const utter=new SpeechSynthesisUtterance("Bem-vindo ao simulador de entrevista. Leia cada pergunta, ou√ßa o √°udio, grave ou digite sua resposta, e envie para avan√ßar. Ao final, voc√™ ver√° seu resumo, medalha e chances da vaga.");
  utter.lang="pt-BR";
  window.speechSynthesis.speak(utter);
}

function startSimulation(){
  currentQuestion=0;
  document.getElementById("menu").style.display="none";
  seconds=0;
  showQuestion(currentQuestion);
  timerInterval=setInterval(()=>{seconds++;updateTimer();},1000);
}

function updateTimer(){
  document.getElementById("timer").style.display="block";
  document.getElementById("phaseInfo").style.display="block";
  document.getElementById("phaseInfo").textContent=`üìç Pergunta ${currentQuestion+1} de ${QUESTIONS.length}`;
  document.getElementById("timer").textContent="‚è±Ô∏è "+formatTime(seconds);
  document.getElementById("progressBarContainer").style.display="block";
}

function showQuestion(idx){
  if(idx>=QUESTIONS.length){ finishInterview(); return; }
  if(window.speechSynthesis.speaking) window.speechSynthesis.cancel();
  const q=QUESTIONS[idx];
  const game=document.getElementById("game");
  game.innerHTML=`
    <div class="card">
      <p><strong>Pergunta ${idx+1}:</strong> ${q.q}</p>
      <button class="btn primary" onclick="speakText('${q.q.replace(/'/g,"&#39;")}')">üîä Ouvir Pergunta</button>
      <textarea id="answerBox" placeholder="Digite sua resposta aqui..."></textarea>
      <button class="btn" id="recordBtn">üé§ Gravar Resposta</button>
      <div id="audioPreview"></div>
      <button class="btn primary" id="sendBtn">‚úÖ Enviar Resposta</button>
    </div>
  `;

  const recordBtn=document.getElementById("recordBtn");
  let mediaRecorder, audioChunks=[];
  recordBtn.onclick=async()=>{
    if(mediaRecorder && mediaRecorder.state=="recording"){ mediaRecorder.stop(); recordBtn.textContent="üé§ Gravar Resposta"; }
    else{
      audioChunks=[];
      const stream=await navigator.mediaDevices.getUserMedia({audio:true});
      mediaRecorder=new MediaRecorder(stream);
      mediaRecorder.start();
      recordBtn.textContent="‚èπÔ∏è Parar Grava√ß√£o";
      mediaRecorder.ondataavailable=e=>audioChunks.push(e.data);
      mediaRecorder.onstop=e=>{
        const blob=new Blob(audioChunks,{type:'audio/mp3'});
        const audioURL=URL.createObjectURL(blob);
        const audioEl=document.createElement("audio");
        audioEl.controls=true; audioEl.src=audioURL;
        document.getElementById("audioPreview").innerHTML="";
        document.getElementById("audioPreview").appendChild(audioEl);
      };
    }
  };

  document.getElementById("sendBtn").onclick=()=>{
    const answer=document.getElementById("answerBox").value;
    answers.push({question:q.q,answer:answer,keywords:q.keywords});
    const percent=((idx+1)/QUESTIONS.length)*100;
    document.getElementById("progressBar").style.width=percent+"%";
    currentQuestion++;
    showQuestion(currentQuestion);
  };
}

function finishInterview(){
  clearInterval(timerInterval);
  document.getElementById("game").innerHTML="";
  document.getElementById("phaseInfo").style.display="none";
  document.getElementById("timer").style.display="none";
  document.getElementById("progressBarContainer").style.display="none";

  let hits=0,total=0;
  answers.forEach(a=>{total+=a.keywords.length; a.keywords.forEach(k=>{if(a.answer.toLowerCase().includes(k)) hits++;});});
  const chance=Math.round((hits/total)*100);

  for(let i=0;i<50;i++){
    const confetti=document.createElement("div");
    confetti.className="confetti";
    confetti.style.left=Math.random()*100+"%";
    confetti.style.background=Math.random()>0.5?"var(--brand-blue)":"var(--brand-green)";
    confetti.style.animationDuration=(2+Math.random()*2)+"s";
    document.body.appendChild(confetti);
    setTimeout(()=>confetti.remove(),4000);
  }

  let html=`<div class="result-box">
    <div class="result-header"><h2>üèÜ Resumo da Entrevista</h2></div>
    <div class="result-summary">
      <div class="result-card">Perguntas Respondidas<br><strong>${QUESTIONS.length}</strong></div>
      <div class="result-card">Total de Palavras-chave<br><strong>${total}</strong></div>
      <div class="result-card">Acertos<br><strong>${hits}</strong></div>
      <div class="result-card">Chance da Vaga<br><strong>${chance}%</strong></div>
    </div>
    <table><tr><th>Pergunta</th><th>Resposta</th><th>Palavras-chave</th></tr>`;
  answers.forEach(a=>{
    let matchCount=0; a.keywords.forEach(k=>{if(a.answer.toLowerCase().includes(k)) matchCount++;});
    html+=`<tr class="${matchCount>0?'correct':'incorrect'}"><td>${a.question}</td><td>${a.answer}</td><td>${a.keywords.join(", ")}</td></tr>`;
  });
  html+=`</table><p class="medal">üéñÔ∏è Parab√©ns! Simula√ß√£o conclu√≠da.</p>
    <button class="btn primary" onclick="backToMenu()">üè† Voltar ao Menu</button>
  </div>`;
  document.getElementById("game").innerHTML=html;
  speakText(`Simula√ß√£o conclu√≠da. Sua chance da vaga √© de ${chance} por cento.`);
  soundWin.play();
}

function speakText(text){ if(window.speechSynthesis.speaking) window.speechSynthesis.cancel(); const utter=new SpeechSynthesisUtterance(text); utter.lang="pt-BR"; window.speechSynthesis.speak(utter); }

function backToMenu(){
  if(window.speechSynthesis.speaking) window.speechSynthesis.cancel();
  clearInterval(timerInterval);
  document.getElementById("game").innerHTML="";
  document.getElementById("menu").style.display="flex";
  document.getElementById("progressBar").style.width="0%";
  answers=[];
}

function formatTime(sec){const m=Math.floor(sec/60).toString().padStart(2,'0');const s=(sec%60).toString().padStart(2,'0');return m+":"+s;}

document.getElementById("toggleDark").onclick=()=>document.body.classList.toggle("dark");
</script>
</body>
</html>
