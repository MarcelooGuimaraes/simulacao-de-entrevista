<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Simulador de Entrevista ‚Äì TechNova Solutions</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
:root{
  --brand-blue:#0b5394;--brand-green:#22b14c;
  --bg-light:#f0f4f8;--bg-dark:#111827;
  --card-light:#fff;--card-dark:#1f2937;
  --ink-light:#111827;--ink-dark:#f9fafb;
  --shadow:0 8px 24px rgba(0,0,0,.15);
  --radius:16px;--transition:.3s ease;
}
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:Inter,sans-serif;background:var(--bg-light);color:var(--ink-light);transition:background var(--transition),color var(--transition);}
body.dark{background:var(--bg-dark);color:var(--ink-dark);}
header{position:sticky;top:0;background:linear-gradient(135deg,var(--brand-blue),var(--brand-green));color:white;display:flex;justify-content:space-between;align-items:center;padding:12px 24px;border-bottom:3px solid var(--brand-green);flex-wrap:wrap;z-index:100;}
header h1{margin:0;font-size:clamp(18px,4vw,26px);display:flex;align-items:center;gap:10px;}
header img{height:36px;}
.controls{display:flex;gap:10px;flex-wrap:wrap;margin-top:8px;}
.btn{border:none;padding:10px 16px;border-radius:12px;cursor:pointer;background:#f9fafb;color:#111;font-weight:600;transition:transform var(--transition),background var(--transition),box-shadow var(--transition);}
body.dark .btn{background:#374151;color:white;}
.btn:hover{transform:translateY(-2px);box-shadow:0 6px 18px rgba(0,0,0,.2);background:#e0f2fe;}
body.dark .btn:hover{background:#4b5563;}
.btn.primary{background:linear-gradient(135deg,var(--brand-blue),var(--brand-green));color:white;}
main.wrap{max-width:1000px;margin:20px auto 40px;padding:20px;}
#menu{text-align:center;display:flex;flex-direction:column;align-items:center;gap:16px;padding:40px;}
#menu ul{text-align:left;max-width:600px;margin:0 auto 20px;}
#game{display:flex;flex-direction:column;align-items:center;gap:20px;}
.card{width:90%;max-width:600px;background:var(--card-light);padding:20px;border-radius:var(--radius);box-shadow:var(--shadow);position:relative;transition:transform var(--transition);display:flex;flex-direction:column;gap:12px;}
body.dark .card{background:var(--card-dark);color:var(--ink-dark);}
textarea{width:100%;height:100px;padding:10px;border-radius:12px;border:1px solid #ccc;font-size:1rem;resize:none;}
textarea:focus{outline:none;border-color:var(--brand-blue);}
#audioPreview{margin-top:10px;}
#mascote{font-size:2.5rem;transition:transform .3s; text-align:center; min-height:50px;}
#mascote.jump{transform:translateY(-10px);}
#progressBarContainer{width:100%;background:#ddd;border-radius:10px;overflow:hidden;margin:20px 0;}
#progressBar{height:20px;background:linear-gradient(90deg,var(--brand-blue),var(--brand-green));width:0%;transition:width .5s ease;}
#phaseInfo{text-align:center;font-weight:700;margin-bottom:10px;}
#timer{text-align:center;font-weight:700;margin:10px 0;font-size:1.1rem;}
.confetti{position:fixed;top:0;left:50%;width:10px;height:10px;background:var(--brand-green);opacity:0.7;animation:fall 3s linear forwards;z-index:9999;}
@keyframes fall{0%{transform:translateY(-10px) rotate(0deg);}100%{transform:translateY(100vh) rotate(720deg);opacity:0;}}
table{border-collapse:collapse;width:100%;max-width:800px;margin:20px auto;}
th,td{border:1px solid #ccc;padding:8px;text-align:left;}
th{background:linear-gradient(135deg,var(--brand-blue),var(--brand-green));color:white;}
.correct{background:#d4edda;}
.incorrect{background:#f8d7da;}
.medal{font-size:1.5rem;text-align:center;margin-top:20px;}
footer{text-align:center;padding:16px 0;color:#555;font-size:0.9rem;border-top:1px solid #ccc;display:flex;flex-direction:column;align-items:center;gap:8px;}
footer img{height:25px;}
body.dark footer{color:#aaa;border-color:#444;}
</style>
</head>
<body>
<header>
  <h1><img src="https://opiniaobrasilia.com.br/wp-content/uploads/2020/12/RenovaDF.jpeg" alt="Logo Renova DF"> Simulador de Entrevista</h1>
  <div class="controls">
    <button class="btn" id="toggleDark">üåô</button>
    <button class="btn" onclick="backToMenu()">üè† In√≠cio</button>
  </div>
</header>

<main class="wrap">
  <div id="menu">
    <h2>üéØ Bem-vindo ao Simulador de Entrevista ‚Äì TechNova Solutions</h2>
    <p>Voc√™ participar√° de uma entrevista para a vaga de <strong>Analista de Projetos</strong> com sal√°rio de <strong>R$4.500,00</strong>.</p>
    <p>üí° Como usar:</p>
    <ul>
      <li>Clique em <strong>Ouvir Pergunta üîä</strong> para escutar a quest√£o.</li>
      <li>Digite sua resposta ou grave com <strong>üé§ Gravar Resposta</strong>.</li>
      <li>Clique em <strong>‚úÖ Enviar Resposta</strong> para avan√ßar.</li>
      <li>Observe as dicas do mascote ü§ñ.</li>
      <li>Respostas anteriores desaparecem quando novas perguntas aparecem.</li>
      <li>Ao final de todas as fases, receber√° resumo, pontua√ß√£o, medalha e chances de conseguir a vaga.</li>
    </ul>
    <button class="btn primary" onclick="speakInstructions()">üîä Ouvir Instru√ß√µes</button>
    <button class="btn primary" onclick="startPhase(1)">‚ñ∂Ô∏è Iniciar Simula√ß√£o</button>
  </div>

  <div id="phaseInfo" style="display:none;"></div>
  <div id="timer" style="display:none;">‚è±Ô∏è 00:00</div>
  <div id="progressBarContainer" style="display:none;">
    <div id="progressBar"></div>
  </div>

  <div id="game"></div>
</main>

<footer>
  <img src="https://opiniaobrasilia.com.br/wp-content/uploads/2020/12/RenovaDF.jpeg" alt="Logo Renova DF">
  <span>Criado por Marcelo Emanoel</span>
</footer>

<script>
// Perguntas de 4 fases com palavras-chave
const PHASES={
1:[{q:"Como voc√™ lida com conflitos no trabalho?",keywords:["conflito","negocia√ß√£o","resolu√ß√£o"]},
   {q:"Como prioriza tarefas?",keywords:["prioriza√ß√£o","organiza√ß√£o","foco"]},
   {q:"Como gerencia seu tempo?",keywords:["tempo","efici√™ncia","planejamento"]},
   {q:"Como motiva colegas?",keywords:["motiva√ß√£o","lideran√ßa","inspira√ß√£o"]},
   {q:"Como garante qualidade no trabalho?",keywords:["qualidade","aten√ß√£o","detalhe"]}],
2:[{q:"Onde se v√™ em 5 anos?",keywords:["objetivos","carreira","crescimento"]},
   {q:"Por que devemos contratar voc√™?",keywords:["habilidades","experi√™ncia","motiva√ß√£o"]},
   {q:"Como reage sob press√£o?",keywords:["press√£o","resili√™ncia","controle"]},
   {q:"Como contribui para a cultura da empresa?",keywords:["cultura","valores","colabora√ß√£o"]},
   {q:"Qual diferencial voc√™ traz para a vaga?",keywords:["diferencial","habilidade","experi√™ncia"]}],
3:[{q:"Como voc√™ resolve problemas complexos?",keywords:["problemas","solu√ß√£o","criatividade"]},
   {q:"Como aprende novas habilidades?",keywords:["aprendizado","adapta√ß√£o","curiosidade"]},
   {q:"Como recebe feedback?",keywords:["feedback","melhoria","crescimento"]},
   {q:"Como lida com erros?",keywords:["erro","responsabilidade","corrigir"]},
   {q:"Como trabalha em equipe?",keywords:["colabora√ß√£o","coopera√ß√£o","comunica√ß√£o"]}],
4:[{q:"Como organiza reuni√µes eficientes?",keywords:["organiza√ß√£o","reuni√£o","efici√™ncia"]},
   {q:"Como toma decis√µes dif√≠ceis?",keywords:["decis√£o","an√°lise","responsabilidade"]},
   {q:"Como mant√©m motiva√ß√£o da equipe?",keywords:["motiva√ß√£o","engajamento","inspira√ß√£o"]},
   {q:"Como gerencia prioridades conflitantes?",keywords:["prioridade","gest√£o","planejamento"]},
   {q:"Como mant√©m qualidade sob press√£o?",keywords:["qualidade","aten√ß√£o","detalhe"]}]
};

let currentPhase=0, questionIndex=0, seconds=0, timerInterval, utter=null;
let userResponses=[[],[],[],[]];

// Sons
const soundCorrect=new Audio("https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg");
const soundWrong=new Audio("https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg");
const soundWin=new Audio("https://actions.google.com/sounds/v1/ambiences/wind_chime.ogg");

function speakInstructions(){
  if(utter) window.speechSynthesis.cancel();
  utter=new SpeechSynthesisUtterance(`Bem-vindo ao simulador da TechNova Solutions. Voc√™ participar√° da entrevista para Analista de Projetos com sal√°rio de 4500 reais. Clique em Ouvir Pergunta para escutar. Digite ou grave sua resposta. Clique em Enviar para avan√ßar. Observe as dicas do mascote. Ao final ter√° resumo com medalha e percentual.`);
  utter.lang="pt-BR"; window.speechSynthesis.speak(utter);
}

function startPhase(n){
  currentPhase=n; questionIndex=0; seconds=0;
  document.getElementById("menu").style.display="none";
  document.getElementById("phaseInfo").style.display="block";
  document.getElementById("timer").style.display="block";
  document.getElementById("progressBarContainer").style.display="block";
  document.getElementById("progressBar").style.width="0%";
  document.getElementById("game").innerHTML="";
  clearInterval(timerInterval);
  timerInterval=setInterval(()=>{seconds++; updateTimer();},1000);
  showQuestion();
}

function showQuestion(){
  if(questionIndex>=PHASES[currentPhase].length){showSummary(); return;}
  if(utter) window.speechSynthesis.cancel();
  const q=PHASES[currentPhase][questionIndex];
  const game=document.getElementById("game");
  game.innerHTML=`
    <div id="mascote">ü§ñ Ol√°! Aqui vai uma dica: pense em ${q.keywords.join(", ")}</div>
    <div class="card">
      <p><strong>Pergunta:</strong> ${q.q}</p>
      <button class="btn" onclick="speakText('${q.q.replace(/'/g,"&#39;")}')">üîä Ouvir Pergunta</button>
      <textarea id="respText" placeholder="Digite aqui sua resposta..."></textarea>
      <div id="audioPreview"></div>
      <button class="btn" onclick="startRecording()">üé§ Gravar Resposta</button>
      <button class="btn primary" onclick="sendAnswer()">‚úÖ Enviar Resposta</button>
    </div>
  `;
}

function startRecording(){
  if(!('webkitSpeechRecognition' in window)) return alert("Seu navegador n√£o suporta reconhecimento de voz.");
  let recognition=new webkitSpeechRecognition();
  recognition.lang="pt-BR"; recognition.interimResults=false; recognition.maxAlternatives=1;
  recognition.start();
  recognition.onresult=function(event){
    const text=event.results[0][0].transcript;
    document.getElementById("respText").value=text;
  };
}

function sendAnswer(){
  const resp=document.getElementById("respText").value.trim();
  userResponses[currentPhase-1][questionIndex]={text:resp};
  questionIndex++;
  updateProgress();
  showQuestion();
}

function updateProgress(){
  const percent=(questionIndex/PHASES[currentPhase].length)*100;
  document.getElementById("progressBar").style.width=percent+"%";
}

function updateTimer(){document.getElementById("timer").textContent="‚è±Ô∏è "+formatTime(seconds);}
function formatTime(s){let m=Math.floor(s/60), sec=s%60; return `${String(m).padStart(2,"0")}:${String(sec).padStart(2,"0")}`;}

function showSummary(){
  clearInterval(timerInterval); document.getElementById("phaseInfo").style.display="none"; document.getElementById("timer").style.display="none";
  const game=document.getElementById("game"); game.innerHTML="<h2>üéâ Simula√ß√£o conclu√≠da!</h2>";
  let html=`<table><tr><th>Fase</th><th>Pergunta</th><th>Resposta</th><th>Palavras-chave</th></tr>`;
  let totalMatches=0, totalWords=0;
  PHASES.forEach((phase,pidx)=>{
    phase.forEach((q,qidx)=>{
      const resp=userResponses[pidx][qidx]?.text||"";
      const matches=q.keywords.filter(k=>resp.toLowerCase().includes(k.toLowerCase())).length;
      totalMatches+=matches; totalWords+=q.keywords.length;
      html+=`<tr><td>${pidx+1}</td><td>${q.q}</td><td>${resp}</td><td>${q.keywords.join(", ")}</td></tr>`;
    });
  });
  html+="</table>";
  const percent=Math.round((totalMatches/totalWords)*100);
  let medal=percent>80?"üèÖ Ouro":percent>50?"ü•à Prata":"ü•â Bronze";
  html+=`<div class="medal">${medal} - Chances de conseguir a vaga: ${percent}%</div>`;
  game.innerHTML+=html; launchConfetti();
}

// Confete
function launchConfetti(){
  for(let i=0;i<40;i++){
    const confetti=document.createElement("div");
    confetti.className="confetti";
    confetti.style.left=Math.random()*100+"%";
    confetti.style.background=Math.random()>0.5?"var(--brand-blue)":"var(--brand-green)";
    confetti.style.animationDuration=(2+Math.random()*2)+"s";
    document.body.appendChild(confetti);
    setTimeout(()=>confetti.remove(),3000);
  }
}

function speakText(text){ if(utter) window.speechSynthesis.cancel(); utter=new SpeechSynthesisUtterance(text); utter.lang="pt-BR"; window.speechSynthesis.speak(utter);}
function backToMenu(){ clearInterval(timerInterval); userResponses=[[],[],[],[]]; currentPhase=0; questionIndex=0; document.getElementById("menu").style.display="flex"; document.getElementById("game").innerHTML=""; document.getElementById("progressBar").style.width="0%"; document.getElementById("phaseInfo").style.display="none"; document.getElementById("timer").style.display="none"; document.getElementById("progressBarContainer").style.display="none";}
document.getElementById("toggleDark").onclick=()=>document.body.classList.toggle("dark");
</script>
</body>
</html>
